!function(e){"use strict";var t=e.HTMLCanvasElement&&e.HTMLCanvasElement.prototype,n=e.Blob&&function(){try{return Boolean(new Blob)}catch(e){return!1}}(),r=n&&e.Uint8Array&&function(){try{return 100===new Blob([new Uint8Array(100)]).size}catch(e){return!1}}(),i=e.BlobBuilder||e.WebKitBlobBuilder||e.MozBlobBuilder||e.MSBlobBuilder,o=/^data:((.*?)(;charset=.*?)?)(;base64)?,/,a=(n||i)&&e.atob&&e.ArrayBuffer&&e.Uint8Array&&function(e){var t,a,s,l,c,u,p,d,f;if(t=e.match(o),!t)throw new Error("invalid data URI");for(a=t[2]?t[1]:"text/plain"+(t[3]||";charset=US-ASCII"),s=!!t[4],l=e.slice(t[0].length),c=s?atob(l):decodeURIComponent(l),u=new ArrayBuffer(c.length),p=new Uint8Array(u),d=0;d<c.length;d+=1)p[d]=c.charCodeAt(d);return n?new Blob([r?p:u],{type:a}):(f=new i,f.append(u),f.getBlob(a))};e.HTMLCanvasElement&&!t.toBlob&&(t.mozGetAsFile?t.toBlob=function(e,n,r){e(r&&t.toDataURL&&a?a(this.toDataURL(n,r)):this.mozGetAsFile("blob",n))}:t.toDataURL&&a&&(t.toBlob=function(e,t,n){e(a(this.toDataURL(t,n)))})),"function"==typeof define&&define.amd?define(function(){return a}):"object"==typeof module&&module.exports?module.exports=a:e.dataURLtoBlob=a}(window);var DAP=window.DAP||{};DAP.pageLoader=function(){function e(e){a.text(parseInt(e))}function t(){var t=0;r.length&&(t=parseInt(s/r.length*100)),o.stop().animate({height:t+"%"},l),i.stop().animate({percentage:t},{duration:l,step:e})}function n(){var t=100;o.stop().animate({height:t+"%"},l/2),i.stop().animate({percentage:t},{duration:l/2,step:e}).css({opacity:1}).animate({opacity:0},function(){i.css({display:"none"}),$(".wrapper").css({opacity:0,visibility:"visible"}).animate({opacity:1})})}var r=$("body").find("img[src]");$("body [style]").each(function(){var e=$(this).css("background-image").replace(/^url\(["']?/,"").replace(/["']?\)$/,"");e&&"none"!=e&&(r=r.add($('<img src="'+e+'"/>')))});var i=$("#loader-container"),o=$("#loader-percentage-line"),a=$("#loader-percentage"),s=0,l=1e3;r.length&&(t(),r.load(function(){$(this).off("load"),s++,t()})),$(window).load(function(){n()})},$(document).ready(function(){DAP.pageLoader(),$(".nav-button").on({click:function(){var e=$(this);e.hasClass("active")?(e.toggleClass("active"),e.siblings().removeClass("active")):(e.siblings().removeClass("active"),e.addClass("active"))}})}),$(window).on({resize:function(){console.log("window resized")}}),function(){"use strict";var e="1m07w66d6okvwry",t="http://localhost:4000/sendMms",n=.2,r=.2,i=angular.module("app",["ngStorage"]);i.controller("controller",function(i,o,a,s){if(navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia,i.getUserMediaSupported=!!navigator.getUserMedia,i.getUserMediaSupported){i.localMediaStream=null,i.settings=o,i.settings.snapshotActions=i.settings.snapshotActions||{saveToDropbox:!1,sendMms:!1};var l=function(){i.dropbox||new Dropbox.Client({key:e}).authenticate(function(e,t){return e?(console.log(e),void(i.errorMessage=e)):(t.getAccountInfo(function(e,t){return e?(console.log(e),void(i.errorMessage=e)):void i.$apply(function(){i.dropboxAccountInfo=t})}),void(i.dropbox=t))})};i.unlinkDropbox=function(){i.dropbox&&i.dropbox.signOut(function(){i.$apply(function(){delete i.dropbox,i.settings.snapshotActions.saveToDropbox=!1})})};var c=function(e){var t=(new Date).toISOString()+".png";i.dropbox.writeFile(t,e,function(e,t){return e?void(i.errorMessage=e):void console.log(t)})};i.$watch("settings.snapshotActions.saveToDropbox",function(e,t){e&&!i.dropbox&&l()});var u=function(){s.post(t,{carrier:"",number:""}).then(function(e){},function(e){i.errorMessage="Error sending MMS: "+e.status})},p=$("video#cam")[0],d=$("canvas#buffer")[0],f=$("canvas#buffer")[0].getContext("2d"),g=null,m=null,x=60,v=0,h=function(e,t){for(var i=0,o=0;o<e.length;o+=4){var a=e[o],s=e[o+1],l=e[o+2],c=t[o],u=t[o+1],p=t[o+2],d=.2989*a+.587*s+.114*l,f=.2989*c+.587*u+.114*p;i+=Math.abs(d-f)/255>n}return i/(e.length/4)>r},y=function(){f.drawImage(p,0,0),v++>x&&(m=g,g=f.getImageData(0,0,640,480).data,m&&g&&h(m,g)&&(console.log("frame change detected"),i.settings.autosave&&i.snapshot()),v=0),requestAnimationFrame(y)};i.snapshot=function(){d.toBlob(function(e){i.settings.snapshotActions.saveToDropbox&&c(e),i.settings.snapshotActions.sendMms&&u(e)})},navigator.getUserMedia({audio:!1,video:!0},function(e){i.localMediaStream=e,$("video#cam").attr("src",window.URL.createObjectURL(i.localMediaStream)),requestAnimationFrame(y)},function(e){i.errorMessage="Error getting user media: "+e})}})}(),function(){function e(e,t){return[].slice.call((t||document).querySelectorAll(e))}if(window.addEventListener){var t=window.StyleFix={link:function(e){try{if("stylesheet"!==e.rel||e.hasAttribute("data-noprefix"))return}catch(n){return}var r,i=e.href||e.getAttribute("data-href"),o=i.replace(/[^\/]+$/,""),a=(/^[a-z]{3,10}:/.exec(o)||[""])[0],s=(/^[a-z]{3,10}:\/\/[^\/]+/.exec(o)||[""])[0],l=/^([^?]*)\??/.exec(i)[1],c=e.parentNode,u=new XMLHttpRequest;u.onreadystatechange=function(){4===u.readyState&&r()},r=function(){var n=u.responseText;if(n&&e.parentNode&&(!u.status||400>u.status||600<u.status)){if(n=t.fix(n,!0,e),o)var n=n.replace(/url\(\s*?((?:"|')?)(.+?)\1\s*?\)/gi,function(e,t,n){return/^([a-z]{3,10}:|#)/i.test(n)?e:/^\/\//.test(n)?'url("'+a+n+'")':/^\//.test(n)?'url("'+s+n+'")':/^\?/.test(n)?'url("'+l+n+'")':'url("'+o+n+'")'}),r=o.replace(/([\\\^\$*+[\]?{}.=!:(|)])/g,"\\$1"),n=n.replace(RegExp("\\b(behavior:\\s*?url\\('?\"?)"+r,"gi"),"$1");r=document.createElement("style"),r.textContent=n,r.media=e.media,r.disabled=e.disabled,r.setAttribute("data-href",e.getAttribute("href")),c.insertBefore(r,e),c.removeChild(e),r.media=e.media}};try{u.open("GET",i),u.send(null)}catch(p){"undefined"!=typeof XDomainRequest&&(u=new XDomainRequest,u.onerror=u.onprogress=function(){},u.onload=r,u.open("GET",i),u.send(null))}e.setAttribute("data-inprogress","")},styleElement:function(e){if(!e.hasAttribute("data-noprefix")){var n=e.disabled;e.textContent=t.fix(e.textContent,!0,e),e.disabled=n}},styleAttribute:function(e){var n=e.getAttribute("style"),n=t.fix(n,!1,e);e.setAttribute("style",n)},process:function(){e('link[rel="stylesheet"]:not([data-inprogress])').forEach(StyleFix.link),e("style").forEach(StyleFix.styleElement),e("[style]").forEach(StyleFix.styleAttribute)},register:function(e,n){(t.fixers=t.fixers||[]).splice(void 0===n?t.fixers.length:n,0,e)},fix:function(e,n,r){for(var i=0;i<t.fixers.length;i++)e=t.fixers[i](e,n,r)||e;return e},camelCase:function(e){return e.replace(/-([a-z])/g,function(e,t){return t.toUpperCase()}).replace("-","")},deCamelCase:function(e){return e.replace(/[A-Z]/g,function(e){return"-"+e.toLowerCase()})}};!function(){setTimeout(function(){e('link[rel="stylesheet"]').forEach(StyleFix.link)},10),document.addEventListener("DOMContentLoaded",StyleFix.process,!1)}()}}(),function(e){function t(e,t,r,i,o){return e=n[e],e.length&&(e=RegExp(t+"("+e.join("|")+")"+r,"gi"),o=o.replace(e,i)),o}if(window.StyleFix&&window.getComputedStyle){var n=window.PrefixFree={prefixCSS:function(e,r,i){var o=n.prefix;if(-1<n.functions.indexOf("linear-gradient")&&(e=e.replace(/(\s|:|,)(repeating-)?linear-gradient\(\s*(-?\d*\.?\d*)deg/gi,function(e,t,n,r){return t+(n||"")+"linear-gradient("+(90-r)+"deg"})),e=t("functions","(\\s|:|,)","\\s*\\(","$1"+o+"$2(",e),e=t("keywords","(\\s|:)","(\\s|;|\\}|$)","$1"+o+"$2$3",e),e=t("properties","(^|\\{|\\s|;)","\\s*:","$1"+o+"$2:",e),n.properties.length){var a=RegExp("\\b("+n.properties.join("|")+")(?!:)","gi");e=t("valueProperties","\\b",":(.+?);",function(e){return e.replace(a,o+"$1")},e)}return r&&(e=t("selectors","","\\b",n.prefixSelector,e),e=t("atrules","@","\\b","@"+o+"$1",e)),e=e.replace(RegExp("-"+o,"g"),"-"),e=e.replace(/-\*-(?=[a-z]+)/gi,n.prefix)},property:function(e){return(0<=n.properties.indexOf(e)?n.prefix:"")+e},value:function(e,r){return e=t("functions","(^|\\s|,)","\\s*\\(","$1"+n.prefix+"$2(",e),e=t("keywords","(^|\\s)","(\\s|$)","$1"+n.prefix+"$2$3",e),0<=n.valueProperties.indexOf(r)&&(e=t("properties","(^|\\s|,)","($|\\s|,)","$1"+n.prefix+"$2$3",e)),e},prefixSelector:function(e){return e.replace(/^:{1,2}/,function(e){return e+n.prefix})},prefixProperty:function(e,t){var r=n.prefix+e;return t?StyleFix.camelCase(r):r}};!function(){var e={},t=[],r=getComputedStyle(document.documentElement,null),i=document.createElement("div").style,o=function(n){if("-"===n.charAt(0)){t.push(n),n=n.split("-");var r=n[1];for(e[r]=++e[r]||1;3<n.length;)n.pop(),r=n.join("-"),StyleFix.camelCase(r)in i&&-1===t.indexOf(r)&&t.push(r)}};if(0<r.length)for(var a=0;a<r.length;a++)o(r[a]);else for(var s in r)o(StyleFix.deCamelCase(s));var l,c,a=0;for(c in e)r=e[c],r>a&&(l=c,a=r);for(n.prefix="-"+l+"-",n.Prefix=StyleFix.camelCase(n.prefix),n.properties=[],a=0;a<t.length;a++)s=t[a],0===s.indexOf(n.prefix)&&(l=s.slice(n.prefix.length),StyleFix.camelCase(l)in i||n.properties.push(l));!("Ms"!=n.Prefix||"transform"in i||"MsTransform"in i)&&"msTransform"in i&&n.properties.push("transform","transform-origin"),n.properties.sort()}(),function(){function e(e,t){return o[t]="",o[t]=e,!!o[t]}var t={"linear-gradient":{property:"backgroundImage",params:"red, teal"},calc:{property:"width",params:"1px + 5%"},element:{property:"backgroundImage",params:"#foo"},"cross-fade":{property:"backgroundImage",params:"url(a.png), url(b.png), 50%"}};t["repeating-linear-gradient"]=t["repeating-radial-gradient"]=t["radial-gradient"]=t["linear-gradient"];var r={initial:"color","zoom-in":"cursor","zoom-out":"cursor",box:"display",flexbox:"display","inline-flexbox":"display",flex:"display","inline-flex":"display",grid:"display","inline-grid":"display","max-content":"width","min-content":"width","fit-content":"width","fill-available":"width"};n.functions=[],n.keywords=[];var i,o=document.createElement("div").style;for(i in t){var a=t[i],s=a.property,a=i+"("+a.params+")";!e(a,s)&&e(n.prefix+a,s)&&n.functions.push(i)}for(var l in r)s=r[l],!e(l,s)&&e(n.prefix+l,s)&&n.keywords.push(l)}(),function(){function t(e){return a.textContent=e+"{}",!!a.sheet.cssRules.length}var r={":read-only":null,":read-write":null,":any-link":null,"::selection":null},i={keyframes:"name",viewport:null,document:'regexp(".")'};n.selectors=[],n.atrules=[];var o,a=e.appendChild(document.createElement("style"));for(o in r){var s=o+(r[o]?"("+r[o]+")":"");!t(s)&&t(n.prefixSelector(s))&&n.selectors.push(o)}for(var l in i)s=l+" "+(i[l]||""),!t("@"+s)&&t("@"+n.prefix+s)&&n.atrules.push(l);e.removeChild(a)}(),n.valueProperties=["transition","transition-property"],e.className+=" "+n.prefix,StyleFix.register(n.prefixCSS)}}(document.documentElement);